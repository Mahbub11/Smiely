{"ast":null,"code":"// import { showSnackbar } from \"./app\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"../../utils/axios\";\nimport { API_LEVEL } from \"../../config\";\nimport { ShowsnackBar } from \"../actions\";\n// import { ShowsnackBar } from \"../actions\";\n// import { showSnackbar } from \"./app\";\n// import { showSnackbar } from \"./app\";\n\nconst initialState = {\n  isAuthenticated: false,\n  loading: true,\n  error: null,\n  user: null\n};\nconst slice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    LoadUserRequest: state => {\n      state.loading = true;\n    },\n    LoadUserSuccess: (state, action) => {\n      state.isAuthenticated = true;\n      state.loading = false;\n      state.user = action.payload;\n    },\n    LoadUserFail: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n      state.isAuthenticated = false;\n    }\n  }\n});\n\n// export the slice of reducer\nexport default slice.reducer;\n\n//  The Actions\nexport const loadUser = () => async dispatch => {\n  try {\n    dispatch({\n      type: \"LoadUserRequest\"\n    });\n    await axios.get(`${API_LEVEL}/user/getuser`, {\n      withCredentials: true\n    }).then(function (response) {\n      dispatch(slice.actions.LoadUserSuccess({\n        payload: response.data.user\n      }));\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: response.data.message\n      }));\n    }).catch(function (error) {\n      dispatch({\n        type: \"LoadUserFail\",\n        payload: error\n      });\n      dispatch(ShowsnackBar({\n        severity: \"error\",\n        message: error.message\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadUserFail\",\n      payload: error\n    });\n    dispatch(ShowsnackBar({\n      severity: \"error\",\n      message: error.message\n    }));\n  }\n};\nexport const loadShop = () => async dispatch => {\n  try {\n    dispatch({\n      type: \"LoadShopRequest\"\n    });\n    await axios.get(`${API_LEVEL}/shop/getShop`, {\n      withCredentials: true\n    }).then(response => {\n      dispatch(slice.actions.LoadShopSuccess({\n        payload: response.data.shopData\n      }));\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: 'Seller Fetched'\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadShopFail\",\n      payload: error.message\n    });\n    dispatch(ShowsnackBar({\n      severity: \"error\",\n      message: error.message\n    }));\n  }\n};\nexport const LoginUser = formValues => async dispatch => {\n  try {\n    await axios.post(`${API_LEVEL}/auth/login`, {\n      ...formValues\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    }).then(function (response) {\n      dispatch(slice.actions.LoadUserSuccess({\n        payload: response.data.user\n      }));\n      console.log(response.data);\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: response.data.message\n      }));\n    }).catch(function (error) {\n      dispatch({\n        type: \"LoadUserFail\",\n        payload: error\n      });\n      dispatch(ShowsnackBar({\n        severity: \"error\",\n        message: error.message\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadUserFail\",\n      payload: error\n    });\n  }\n};","map":{"version":3,"names":["createSlice","axios","API_LEVEL","ShowsnackBar","initialState","isAuthenticated","loading","error","user","slice","name","reducers","LoadUserRequest","state","LoadUserSuccess","action","payload","LoadUserFail","reducer","loadUser","dispatch","type","get","withCredentials","then","response","actions","data","severity","message","catch","loadShop","LoadShopSuccess","shopData","LoginUser","formValues","post","headers","console","log"],"sources":["C:/Users/mahbu/Documents/MERN/SMIELY/frontend/src/redux/slices/auth.js"],"sourcesContent":["// import { showSnackbar } from \"./app\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../utils/axios\";\r\nimport { API_LEVEL } from \"../../config\";\r\nimport { ShowsnackBar} from \"../actions\";\r\n// import { ShowsnackBar } from \"../actions\";\r\n// import { showSnackbar } from \"./app\";\r\n// import { showSnackbar } from \"./app\";\r\n\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  loading: true,\r\n  error:null,\r\n  user:null,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    LoadUserRequest:(state)=>  {\r\n      state.loading = true;\r\n    },\r\n    LoadUserSuccess:(state, action)=>  {\r\n      state.isAuthenticated = true;\r\n      state.loading = false;\r\n      state.user = action.payload;\r\n    },\r\n    LoadUserFail:(state, action)=> {\r\n      state.loading = false;\r\n      state.error = action.payload;\r\n      state.isAuthenticated = false;\r\n    },\r\n  },\r\n  \r\n});\r\n\r\n// export the slice of reducer\r\nexport default slice.reducer;\r\n\r\n//  The Actions\r\nexport const loadUser = () => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: \"LoadUserRequest\",\r\n    });\r\n\r\n\r\n     await axios.get(`${API_LEVEL}/user/getuser`, {\r\n      withCredentials: true,\r\n    }).then(function(response){\r\n      dispatch(\r\n        slice.actions.LoadUserSuccess({\r\n          payload: response.data.user\r\n        })\r\n     );\r\n  \r\n      dispatch( ShowsnackBar({ severity: \"success\", message: response.data.message}))\r\n\r\n    }).catch(function (error) {\r\n      dispatch({\r\n        type: \"LoadUserFail\",\r\n        payload: error,\r\n      });\r\n      dispatch( ShowsnackBar({ severity: \"error\", message: error.message }))\r\n     \r\n    });\r\n   \r\n \r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadUserFail\",\r\n      payload: error,\r\n    });\r\n    dispatch( ShowsnackBar({ severity: \"error\", message: error.message }))\r\n  }\r\n}\r\n\r\n\r\nexport const loadShop = () => async (dispatch) => {\r\n\r\n  try {\r\n    dispatch({\r\n      type: \"LoadShopRequest\",\r\n    });\r\n      await axios.get(`${API_LEVEL}/shop/getShop`, {\r\n      withCredentials: true,\r\n    }).then((response)=>{\r\n\r\n     \r\n          dispatch(\r\n      slice.actions.LoadShopSuccess({\r\n        payload: response.data.shopData\r\n      }))\r\n\r\n    dispatch( ShowsnackBar({ severity: \"success\", message: 'Seller Fetched'}))\r\n    });\r\n\r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadShopFail\",\r\n      payload: error.message,\r\n    });\r\n   \r\n    dispatch( ShowsnackBar({ severity: \"error\", message: error.message}))\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const LoginUser = (formValues) => async (dispatch) => { \r\n\r\n  try {\r\n    await axios\r\n    .post(\r\n      `${API_LEVEL}/auth/login`,\r\n      {\r\n        ...formValues,\r\n      },\r\n      {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        withCredentials: true,\r\n      }\r\n    )\r\n    .then(function (response) {\r\n     \r\n      dispatch(\r\n         slice.actions.LoadUserSuccess({\r\n           payload: response.data.user\r\n         })\r\n      );\r\n\r\n      console.log(response.data)\r\n\r\n      dispatch( ShowsnackBar({ severity: \"success\", message: response.data.message }))\r\n    \r\n    })\r\n    .catch(function (error) {\r\n      dispatch({\r\n        type: \"LoadUserFail\",\r\n        payload: error,\r\n      });\r\n      dispatch( ShowsnackBar({ severity: \"error\", message: error.message }))\r\n     \r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadUserFail\",\r\n      payload: error,\r\n    });\r\n  }\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}