{"ast":null,"code":"// import { showSnackbar } from \"./app\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"../../utils/axios\";\nimport { API_LEVEL } from \"../../config\";\nimport { ShowsnackBar } from \"../actions\";\n// import { ShowsnackBar } from \"../actions\";\n// import { showSnackbar } from \"./app\";\n// import { showSnackbar } from \"./app\";\n\nconst initialState = {\n  isAuthenticated: false,\n  isSeller: false,\n  loading: true,\n  error: null,\n  user: null,\n  shop: null\n};\nconst slice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    LoadUserRequest: state => {\n      state.loading = true;\n    },\n    LoadUserSuccess: (state, action) => {\n      state.isAuthenticated = true;\n      state.loading = false;\n      state.user = action.payload;\n    },\n    LoadUserFail: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n      state.isAuthenticated = false;\n    },\n    LoadShopRequest: state => {\n      state.loading = true;\n    },\n    // Seller has Shop\n    LoadShopSuccess: (state, action) => {\n      state.isSeller = true;\n      state.loading = false;\n      state.shop = action.payload;\n    },\n    LoadShopFail: (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n      state.loading = false;\n    },\n    Login(state, action) {\n      state.isAuthenticated = true;\n      state.loading = false;\n      state.user = action.payload;\n    }\n  }\n});\n\n// export the slice of reducer\n\nexport default slice.reducer;\n\n//  The Actions\nexport const loadUser = () => async dispatch => {\n  try {\n    dispatch({\n      type: \"LoadUserRequest\"\n    });\n    await axios.get(`${API_LEVEL}/user/getuser`, {\n      withCredentials: true\n    }).then(function (response) {\n      dispatch(slice.actions.LoadUserSuccess({\n        payload: response.data.user\n      }));\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: response.data.message\n      }));\n    }).catch(function (error) {\n      dispatch({\n        type: \"LoadUserFail\",\n        payload: error\n      });\n      dispatch(ShowsnackBar({\n        severity: \"error\",\n        message: error.message\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadUserFail\",\n      payload: error\n    });\n    dispatch(ShowsnackBar({\n      severity: \"error\",\n      message: error.message\n    }));\n  }\n};\nexport const loadShop = () => async dispatch => {\n  try {\n    dispatch({\n      type: \"LoadShopRequest\"\n    });\n    await axios.get(`${API_LEVEL}/shop/getShop`, {\n      withCredentials: true\n    }).then(response => {\n      dispatch(slice.actions.LoadShopSuccess({\n        payload: response.data.shopData\n      }));\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: 'Seller Fetched'\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadShopFail\",\n      payload: error.message\n    });\n    dispatch(ShowsnackBar({\n      severity: \"error\",\n      message: error.message\n    }));\n  }\n};\nexport const LoginUser = formValues => async dispatch => {\n  try {\n    await axios.post(`${API_LEVEL}/auth/login`, {\n      ...formValues\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    }).then(function (response) {\n      dispatch(slice.actions.LoadUserSuccess({\n        payload: response.data.user\n      }));\n      console.log(response.data);\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: response.data.message\n      }));\n    }).catch(function (error) {\n      dispatch({\n        type: \"LoadUserFail\",\n        payload: error\n      });\n      dispatch(ShowsnackBar({\n        severity: \"error\",\n        message: error.message\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadUserFail\",\n      payload: error\n    });\n  }\n};","map":{"version":3,"names":["createSlice","axios","API_LEVEL","ShowsnackBar","initialState","isAuthenticated","isSeller","loading","error","user","shop","slice","name","reducers","LoadUserRequest","state","LoadUserSuccess","action","payload","LoadUserFail","LoadShopRequest","LoadShopSuccess","LoadShopFail","Login","reducer","loadUser","dispatch","type","get","withCredentials","then","response","actions","data","severity","message","catch","loadShop","shopData","LoginUser","formValues","post","headers","console","log"],"sources":["C:/Users/mahbu/Documents/MERN/SMIELY/frontend/src/redux/slices/auth.js"],"sourcesContent":["// import { showSnackbar } from \"./app\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../utils/axios\";\r\nimport { API_LEVEL } from \"../../config\";\r\nimport { ShowsnackBar} from \"../actions\";\r\n// import { ShowsnackBar } from \"../actions\";\r\n// import { showSnackbar } from \"./app\";\r\n// import { showSnackbar } from \"./app\";\r\n\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  isSeller:false,\r\n  loading: true,\r\n  error:null,\r\n  user:null,\r\n  shop:null,\r\n\r\n\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    LoadUserRequest:(state)=>  {\r\n      state.loading = true;\r\n    },\r\n    LoadUserSuccess:(state, action)=>  {\r\n      state.isAuthenticated = true;\r\n      state.loading = false;\r\n      state.user = action.payload;\r\n    },\r\n    LoadUserFail:(state, action)=> {\r\n      state.loading = false;\r\n      state.error = action.payload;\r\n      state.isAuthenticated = false;\r\n    },\r\n    LoadShopRequest: (state) => {\r\n      state.loading = true;\r\n    },\r\n    // Seller has Shop\r\n    LoadShopSuccess: (state, action) => {\r\n      state.isSeller = true;\r\n      state.loading = false;\r\n      state.shop = action.payload;\r\n    },\r\n    LoadShopFail: (state, action) => {\r\n      state.loading = false;\r\n      state.error = action.payload;\r\n      state.loading = false;\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n    Login(state,action){\r\n      state.isAuthenticated = true;\r\n      state.loading = false;\r\n      state.user = action.payload;\r\n    }\r\n  \r\n  },\r\n  \r\n});\r\n\r\n// export the slice of reducer\r\n\r\nexport default slice.reducer;\r\n\r\n//  The Actions\r\nexport const loadUser = () => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: \"LoadUserRequest\",\r\n    });\r\n\r\n\r\n     await axios.get(`${API_LEVEL}/user/getuser`, {\r\n      withCredentials: true,\r\n    }).then(function(response){\r\n      dispatch(\r\n        slice.actions.LoadUserSuccess({\r\n          payload: response.data.user\r\n        })\r\n     );\r\n  \r\n      dispatch( ShowsnackBar({ severity: \"success\", message: response.data.message}))\r\n\r\n    }).catch(function (error) {\r\n      dispatch({\r\n        type: \"LoadUserFail\",\r\n        payload: error,\r\n      });\r\n      dispatch( ShowsnackBar({ severity: \"error\", message: error.message }))\r\n     \r\n    });\r\n   \r\n \r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadUserFail\",\r\n      payload: error,\r\n    });\r\n    dispatch( ShowsnackBar({ severity: \"error\", message: error.message }))\r\n  }\r\n}\r\n\r\n\r\nexport const loadShop = () => async (dispatch) => {\r\n\r\n  try {\r\n    dispatch({\r\n      type: \"LoadShopRequest\",\r\n    });\r\n      await axios.get(`${API_LEVEL}/shop/getShop`, {\r\n      withCredentials: true,\r\n    }).then((response)=>{\r\n\r\n     \r\n          dispatch(\r\n      slice.actions.LoadShopSuccess({\r\n        payload: response.data.shopData\r\n      }))\r\n\r\n    dispatch( ShowsnackBar({ severity: \"success\", message: 'Seller Fetched'}))\r\n    });\r\n\r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadShopFail\",\r\n      payload: error.message,\r\n    });\r\n   \r\n    dispatch( ShowsnackBar({ severity: \"error\", message: error.message}))\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const LoginUser = (formValues) => async (dispatch) => { \r\n\r\n  try {\r\n    await axios\r\n    .post(\r\n      `${API_LEVEL}/auth/login`,\r\n      {\r\n        ...formValues,\r\n      },\r\n      {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        withCredentials: true,\r\n      }\r\n    )\r\n    .then(function (response) {\r\n     \r\n      dispatch(\r\n         slice.actions.LoadUserSuccess({\r\n           payload: response.data.user\r\n         })\r\n      );\r\n\r\n      console.log(response.data)\r\n\r\n      dispatch( ShowsnackBar({ severity: \"success\", message: response.data.message }))\r\n    \r\n    })\r\n    .catch(function (error) {\r\n      dispatch({\r\n        type: \"LoadUserFail\",\r\n        payload: error,\r\n      });\r\n      dispatch( ShowsnackBar({ severity: \"error\", message: error.message }))\r\n     \r\n    });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadUserFail\",\r\n      payload: error,\r\n    });\r\n  }\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}