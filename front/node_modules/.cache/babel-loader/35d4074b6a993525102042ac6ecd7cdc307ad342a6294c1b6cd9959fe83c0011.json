{"ast":null,"code":"// import { showSnackbar } from \"./app\";\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"../../utils/axios\";\nimport { API_LEVEL } from \"../../config\";\nconst initialState = {\n  loading: false,\n  error: null,\n  messages: []\n};\nconst slice = createSlice({\n  name: \"message\",\n  initialState,\n  reducers: {\n    // get the post of following user\n    newMessageRequest: state => {\n      state.loading = true;\n    },\n    newMessageSuccess: (state, action) => {\n      state.loading = false;\n      state.messages = action.payload.payload.message;\n    },\n    newMessageFail: (state, action) => {\n      state.loading = false;\n      state.error = action.payload.payload;\n    }\n  }\n});\n\n// export the slice of reducer\nexport default slice.reducer;\n\n// Add New Message\nexport const sendMessage = msgData => async dispatch => {\n  try {\n    dispatch(slice.actions.newMessageRequest);\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    };\n    const {\n      data\n    } = await axios.post(`${API_LEVEL}/message/new/`, msgData, config);\n    dispatch(slice.actions.newMessageSuccess({\n      payload: data.message\n    }));\n  } catch (error) {\n    dispatch(slice.actions.newMessageFail({\n      payload: error\n    }));\n    console.log(error);\n  }\n};","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","API_LEVEL","initialState","loading","error","messages","slice","name","reducers","newMessageRequest","state","newMessageSuccess","action","payload","message","newMessageFail","reducer","sendMessage","msgData","dispatch","actions","config","header","withCredentials","data","post","console","log"],"sources":["C:/Users/mahbu/Documents/MERN/SMIELY/frontend/src/redux/slices/message.js"],"sourcesContent":["// import { showSnackbar } from \"./app\";\r\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../utils/axios\";\r\nimport { API_LEVEL } from \"../../config\";\r\n\r\n\r\nconst initialState = {\r\n  loading: false,\r\n  error: null,\r\n  messages: [],\r\n  \r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"message\",\r\n  initialState,\r\n  reducers: {\r\n    // get the post of following user\r\n    newMessageRequest: (state) => {\r\n      state.loading = true;\r\n    },\r\n    newMessageSuccess: (state, action) => {\r\n      state.loading = false;\r\n      state.messages = action.payload.payload.message;\r\n    },\r\n    newMessageFail: (state, action) => {\r\n      state.loading = false;\r\n      state.error = action.payload.payload;\r\n    },\r\n    \r\n  }\r\n});\r\n\r\n// export the slice of reducer\r\nexport default slice.reducer;\r\n\r\n// Add New Message\r\nexport const sendMessage = (msgData) => async (dispatch) => {\r\n  try {\r\n\r\n    dispatch(slice.actions.newMessageRequest);\r\n      const config = { header: { \"Content-Type\": \"application/json\" },withCredentials:true }\r\n      const { data } = await axios.post(`${API_LEVEL}/message/new/`, msgData, config);\r\n\r\n      \r\n    dispatch(\r\n      slice.actions.newMessageSuccess({\r\n        payload: data.message,\r\n      })\r\n    );\r\n\r\n  } catch (error) {\r\n    dispatch(\r\n      slice.actions.newMessageFail({\r\n        payload: error,\r\n      })\r\n    );\r\n    console.log(error)\r\n  }\r\n}"],"mappings":"AAAA;AACA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,mBAAmB;AACrC,SAASC,SAAS,QAAQ,cAAc;AAGxC,MAAMC,YAAY,GAAG;EACnBC,OAAO,EAAE,KAAK;EACdC,KAAK,EAAE,IAAI;EACXC,QAAQ,EAAE;AAEZ,CAAC;AAED,MAAMC,KAAK,GAAGP,WAAW,CAAC;EACxBQ,IAAI,EAAE,SAAS;EACfL,YAAY;EACZM,QAAQ,EAAE;IACR;IACAC,iBAAiB,EAAGC,KAAK,IAAK;MAC5BA,KAAK,CAACP,OAAO,GAAG,IAAI;IACtB,CAAC;IACDQ,iBAAiB,EAAEA,CAACD,KAAK,EAAEE,MAAM,KAAK;MACpCF,KAAK,CAACP,OAAO,GAAG,KAAK;MACrBO,KAAK,CAACL,QAAQ,GAAGO,MAAM,CAACC,OAAO,CAACA,OAAO,CAACC,OAAO;IACjD,CAAC;IACDC,cAAc,EAAEA,CAACL,KAAK,EAAEE,MAAM,KAAK;MACjCF,KAAK,CAACP,OAAO,GAAG,KAAK;MACrBO,KAAK,CAACN,KAAK,GAAGQ,MAAM,CAACC,OAAO,CAACA,OAAO;IACtC;EAEF;AACF,CAAC,CAAC;;AAEF;AACA,eAAeP,KAAK,CAACU,OAAO;;AAE5B;AACA,OAAO,MAAMC,WAAW,GAAIC,OAAO,IAAK,MAAOC,QAAQ,IAAK;EAC1D,IAAI;IAEFA,QAAQ,CAACb,KAAK,CAACc,OAAO,CAACX,iBAAiB,CAAC;IACvC,MAAMY,MAAM,GAAG;MAAEC,MAAM,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAACC,eAAe,EAAC;IAAK,CAAC;IACtF,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMxB,KAAK,CAACyB,IAAI,CAAE,GAAExB,SAAU,eAAc,EAAEiB,OAAO,EAAEG,MAAM,CAAC;IAGjFF,QAAQ,CACNb,KAAK,CAACc,OAAO,CAACT,iBAAiB,CAAC;MAC9BE,OAAO,EAAEW,IAAI,CAACV;IAChB,CAAC,CACH,CAAC;EAEH,CAAC,CAAC,OAAOV,KAAK,EAAE;IACde,QAAQ,CACNb,KAAK,CAACc,OAAO,CAACL,cAAc,CAAC;MAC3BF,OAAO,EAAET;IACX,CAAC,CACH,CAAC;IACDsB,OAAO,CAACC,GAAG,CAACvB,KAAK,CAAC;EACpB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}