{"ast":null,"code":"// import { showSnackbar } from \"./app\";\nimport { createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"../../utils/axios\";\nimport { API_LEVEL } from \"../../config\";\nimport { ShowsnackBar } from \"../actions\";\n// import { ShowsnackBar } from \"../actions\";\n// import { showSnackbar } from \"./app\";\n// import { showSnackbar } from \"./app\";\n\nconst initialState = {\n  isAuthenticated: false,\n  loading: true,\n  error: null,\n  user: null\n};\nconst slice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    LoadUserRequest: state => {\n      state.loading = true;\n    },\n    LoadUserSuccess: (state, action) => {\n      state.isAuthenticated = true;\n      state.loading = false;\n      state.user = action.payload.payload;\n    },\n    LoadUserFail: (state, action) => {\n      state.loading = false;\n      state.error = action.payload.payload;\n      state.isAuthenticated = false;\n    }\n  }\n});\n\n// export the slice of reducer\nexport default slice.reducer;\n\n//  The Actions\nexport const RegisterUser = userData => async dispatch => {\n  try {\n    dispatch({\n      type: \"LoadUserRequest\"\n    });\n    axios.post(\"http://localhost:3006/api/v1/auth/create-user\", userData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      console.log(res);\n      dispatch({\n        type: 'LoadUserSuccess',\n        payload: res.user\n      });\n    }).catch(err => {\n      console.log(err.message);\n      //   dispatch({\n      //     type: 'LoadUserFail',\n      //     payload: err.message,\n      // });\n      dispatch(slice.actions.LoadUserSuccess({\n        payload: err.message\n      }));\n    });\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: 'LoadUserFail',\n      payload: error.response.data.message\n    });\n  }\n};\nexport const LoginUser = (email, password) => async dispatch => {\n  try {\n    await axios.post(`${API_LEVEL}/auth/login`, {\n      email,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true\n    }).then(function (response) {\n      dispatch(slice.actions.LoadUserSuccess({\n        payload: response.data.user\n      }));\n      console.log(response.data);\n      dispatch(ShowsnackBar({\n        severity: \"success\",\n        message: response.data.message\n      }));\n    }).catch(function (error) {\n      dispatch({\n        type: \"LoadUserFail\",\n        payload: error\n      });\n      dispatch(ShowsnackBar({\n        severity: \"error\",\n        message: error.message\n      }));\n    });\n  } catch (error) {\n    dispatch({\n      type: \"LoadUserFail\",\n      payload: error\n    });\n  }\n};","map":{"version":3,"names":["createSlice","axios","API_LEVEL","ShowsnackBar","initialState","isAuthenticated","loading","error","user","slice","name","reducers","LoadUserRequest","state","LoadUserSuccess","action","payload","LoadUserFail","reducer","RegisterUser","userData","dispatch","type","post","headers","then","res","console","log","catch","err","message","actions","response","data","LoginUser","email","password","withCredentials","severity"],"sources":["C:/Users/mahbu/Documents/MERN/SMIELY/frontend/src/redux/slices/auth.js"],"sourcesContent":["// import { showSnackbar } from \"./app\";\r\nimport { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"../../utils/axios\";\r\nimport { API_LEVEL } from \"../../config\";\r\nimport { ShowsnackBar } from \"../actions\";\r\n// import { ShowsnackBar } from \"../actions\";\r\n// import { showSnackbar } from \"./app\";\r\n// import { showSnackbar } from \"./app\";\r\n\r\nconst initialState = {\r\n  isAuthenticated: false,\r\n  loading: true,\r\n  error: null,\r\n  user: null,\r\n};\r\n\r\nconst slice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {\r\n    LoadUserRequest: (state) => {\r\n      state.loading = true;\r\n    },\r\n    LoadUserSuccess: (state, action) => {\r\n      state.isAuthenticated = true;\r\n      state.loading = false;\r\n      state.user = action.payload.payload;\r\n    },\r\n    LoadUserFail: (state, action) => {\r\n      state.loading = false;\r\n      state.error = action.payload.payload;\r\n      state.isAuthenticated = false;\r\n    },\r\n  },\r\n});\r\n\r\n// export the slice of reducer\r\nexport default slice.reducer;\r\n\r\n//  The Actions\r\nexport const RegisterUser = (userData) => async (dispatch) => {\r\n  try {\r\n\r\n   \r\n    dispatch({\r\n      type: \"LoadUserRequest\",\r\n    });\r\n\r\n    axios\r\n      .post(\"http://localhost:3006/api/v1/auth/create-user\", userData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        dispatch({\r\n          type: 'LoadUserSuccess',\r\n          payload: res.user,\r\n      });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n      //   dispatch({\r\n      //     type: 'LoadUserFail',\r\n      //     payload: err.message,\r\n      // });\r\n      dispatch(\r\n        slice.actions.LoadUserSuccess({\r\n          payload: err.message\r\n        })\r\n     );\r\n      });\r\n\r\n      \r\n  } catch (error) {\r\n    console.log(error);\r\n    dispatch({\r\n        type: 'LoadUserFail',\r\n        payload: error.response.data.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const LoginUser = (email,password) => async (dispatch) => {\r\n  try {\r\n    await axios\r\n      .post(\r\n        `${API_LEVEL}/auth/login`,\r\n        {\r\n          email,password,\r\n        },\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          withCredentials: true,\r\n        }\r\n      )\r\n      .then(function (response) {\r\n        dispatch(\r\n          slice.actions.LoadUserSuccess({\r\n            payload: response.data.user,\r\n          })\r\n        );\r\n\r\n        console.log(response.data);\r\n\r\n        dispatch(\r\n          ShowsnackBar({ severity: \"success\", message: response.data.message })\r\n        );\r\n      })\r\n      .catch(function (error) {\r\n        dispatch({\r\n          type: \"LoadUserFail\",\r\n          payload: error,\r\n        });\r\n        dispatch(ShowsnackBar({ severity: \"error\", message: error.message }));\r\n      });\r\n  } catch (error) {\r\n    dispatch({\r\n      type: \"LoadUserFail\",\r\n      payload: error,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}